@let(enabled = auth.user?.isEnabledAutoplayNext ?? session.get('autoplayNext') === 'true')

@form({
  action: form.patch('lessons.autoplay', { slug: lesson.slug }),
  target: { 'up-lesson-autoplay': `${lesson.id}:any` },
})
  @tooltip({ text: enabled ? 'Autoplay: Enabled' : 'Autoplay: Disabled', class: 'tooltip-bottom' })
    <button {{ html.attrs({ type: 'submit', class: ['group/tog btn btn-toggle btn-square', { 'active': enabled }] }) }}>
      @if (enabled)
        @svg('solar:stopwatch-play-bold', { class: 'w-5 h-5 text-success' })
      @else
        @svg('solar:stopwatch-play-outline', { class: 'w-5 h-5 text-base-content/60 group-hover/tog:text-base-content duration-200' })
      @endif
    </button>
  @end

  @!frags.toaster()
@end
